<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:27,&quot;tests&quot;:48,&quot;passes&quot;:48,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-11-28T19:21:12.685Z&quot;,&quot;end&quot;:&quot;2024-11-28T19:21:14.932Z&quot;,&quot;duration&quot;:2247,&quot;testsRegistered&quot;:58,&quot;passPercent&quot;:82.75862068965517,&quot;pendingPercent&quot;:0,&quot;other&quot;:2,&quot;hasOther&quot;:true,&quot;skipped&quot;:10,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;db28b0b2-d497-430c-883a-0b4b00d5debf&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eae1debb-f5cd-4da1-bc48-7ec78d80029a&quot;,&quot;title&quot;:&quot;CitaController&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;CitaController\&quot;&quot;,&quot;fullTitle&quot;:&quot;CitaController \&quot;before each\&quot; hook in \&quot;CitaController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { params: {}, body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf31a1e1-bf8a-423a-9b79-ec7e9180060d&quot;,&quot;parentUUID&quot;:&quot;eae1debb-f5cd-4da1-bc48-7ec78d80029a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CitaController\&quot;&quot;,&quot;fullTitle&quot;:&quot;CitaController \&quot;after each\&quot; hook in \&quot;CitaController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e080aa1-a30a-44f7-b670-02e8900e913c&quot;,&quot;parentUUID&quot;:&quot;eae1debb-f5cd-4da1-bc48-7ec78d80029a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b36ae20a-30a7-46a2-839b-652050a38793&quot;,&quot;title&quot;:&quot;getAllCitas&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver todas las citas con mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;CitaController getAllCitas debería devolver todas las citas con mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCitas = [{ idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, id: 1 }];\nstub = sinon.stub(Cita, &#x27;findAll&#x27;).resolves(mockCitas);\nawait CitaController.getAllCitas(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Lista de todas las Citas\&quot;,\n    data: mockCitas\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;504a77c8-a2ed-4535-8f86-cf6ed8aa0732&quot;,&quot;parentUUID&quot;:&quot;b36ae20a-30a7-46a2-839b-652050a38793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si ocurre un problema&quot;,&quot;fullTitle&quot;:&quot;CitaController getAllCitas debería devolver un error si ocurre un problema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cita, &#x27;findAll&#x27;).rejects(new Error(&#x27;Database error&#x27;));\nawait CitaController.getAllCitas(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46de3012-16d6-4031-84bc-ae6b843d6e76&quot;,&quot;parentUUID&quot;:&quot;b36ae20a-30a7-46a2-839b-652050a38793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;504a77c8-a2ed-4535-8f86-cf6ed8aa0732&quot;,&quot;46de3012-16d6-4031-84bc-ae6b843d6e76&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c31bf07-fc0e-4e87-a43d-e11f9cefa25b&quot;,&quot;title&quot;:&quot;createCita&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería crear una cita y devolver el mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;CitaController createCita debería crear una cita y devolver el mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newCita = { fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, idclientes: 1 };\nconst createdCita = { idcitas: 2, ...newCita };\nstub = sinon.stub(Cita, &#x27;create&#x27;).resolves(createdCita);\nreq.body = newCita;\nawait CitaController.createCita(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n    message: \&quot;Cita Creada exitosamente\&quot;,\n    data: createdCita\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70225746-a582-42e6-97d6-594449e92fde&quot;,&quot;parentUUID&quot;:&quot;9c31bf07-fc0e-4e87-a43d-e11f9cefa25b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si no se puede crear la cita&quot;,&quot;fullTitle&quot;:&quot;CitaController createCita debería devolver un error si no se puede crear la cita&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cita, &#x27;create&#x27;).rejects(new Error(&#x27;Error de creación&#x27;));\nawait CitaController.createCita(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Error de creación&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71637d83-4813-480d-a87c-e919a24fb499&quot;,&quot;parentUUID&quot;:&quot;9c31bf07-fc0e-4e87-a43d-e11f9cefa25b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70225746-a582-42e6-97d6-594449e92fde&quot;,&quot;71637d83-4813-480d-a87c-e919a24fb499&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f31767e5-2692-47c4-b855-78983995bcab&quot;,&quot;title&quot;:&quot;getCitaById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver una cita si se encuentra el ID&quot;,&quot;fullTitle&quot;:&quot;CitaController getCitaById debería devolver una cita si se encuentra el ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCita = { idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, id: 1 };\nstub = sinon.stub(Cita, &#x27;findById&#x27;).resolves(mockCita);\nreq.params.id = 1;\nawait CitaController.getCitaById(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cita encontrada\&quot;,\n    data: mockCita\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8193b26e-186b-4500-8ec9-529bb041a9f1&quot;,&quot;parentUUID&quot;:&quot;f31767e5-2692-47c4-b855-78983995bcab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si la cita no existe&quot;,&quot;fullTitle&quot;:&quot;CitaController getCitaById debería devolver un 404 si la cita no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cita, &#x27;findById&#x27;).resolves(null);\nreq.params.id = 999;\nawait CitaController.getCitaById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cita no encontrada\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bde2bd4d-dbf7-4dad-90d8-c95268f54c74&quot;,&quot;parentUUID&quot;:&quot;f31767e5-2692-47c4-b855-78983995bcab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8193b26e-186b-4500-8ec9-529bb041a9f1&quot;,&quot;bde2bd4d-dbf7-4dad-90d8-c95268f54c74&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1cb0b049-3512-4045-8faf-e1111e42441c&quot;,&quot;title&quot;:&quot;updateCita&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería actualizar una cita y devolver el mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;CitaController updateCita debería actualizar una cita y devolver el mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedCita = { idcitas: 1, fechacita: &#x27;2024-12-01&#x27;, ubicacion: &#x27;Casa&#x27;, id: 1 };\nstub = sinon.stub(Cita, &#x27;update&#x27;).resolves(updatedCita);\nreq.params.id = 1;\nreq.body = updatedCita;\nawait CitaController.updateCita(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cita actualizada\&quot;,\n    data: updatedCita\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e03f318-c1a0-4249-867c-ef3ef782de63&quot;,&quot;parentUUID&quot;:&quot;1cb0b049-3512-4045-8faf-e1111e42441c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si la cita a actualizar no existe&quot;,&quot;fullTitle&quot;:&quot;CitaController updateCita debería devolver un 404 si la cita a actualizar no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cita, &#x27;update&#x27;).resolves(null);\nreq.params.id = 999;\nawait CitaController.updateCita(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cita no encontrada\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5d94b4-15d1-477d-ae6d-6673b1c49577&quot;,&quot;parentUUID&quot;:&quot;1cb0b049-3512-4045-8faf-e1111e42441c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e03f318-c1a0-4249-867c-ef3ef782de63&quot;,&quot;ae5d94b4-15d1-477d-ae6d-6673b1c49577&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0462e086-2302-48c7-aa64-3c59350fed47&quot;,&quot;title&quot;:&quot;deleteCita&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaController.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar una cita y devolver el mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;CitaController deleteCita debería eliminar una cita y devolver el mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCita = { idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, id: 1 };\nsinon.stub(Cita, &#x27;findById&#x27;).resolves(mockCita);\nsinon.stub(Cita, &#x27;delete&#x27;).resolves(mockCita);\nreq.params.id = 1;\nawait CitaController.deleteCita(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cita eliminada\&quot;,\n    data: mockCita\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c861e610-d4f5-4ed6-a2be-5bdb4ab11fa8&quot;,&quot;parentUUID&quot;:&quot;0462e086-2302-48c7-aa64-3c59350fed47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si la cita a eliminar no existe&quot;,&quot;fullTitle&quot;:&quot;CitaController deleteCita debería devolver un 404 si la cita a eliminar no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(Cita, &#x27;findById&#x27;).resolves(null);\nreq.params.id = 999;\nawait CitaController.deleteCita(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cita no encontrada\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ccc7d23-3cf3-4362-8331-246fd6240339&quot;,&quot;parentUUID&quot;:&quot;0462e086-2302-48c7-aa64-3c59350fed47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si ocurre un problema al eliminar&quot;,&quot;fullTitle&quot;:&quot;CitaController deleteCita debería devolver un error si ocurre un problema al eliminar&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCita = { idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, id: 1 };\nsinon.stub(Cita, &#x27;findById&#x27;).resolves(mockCita);\nsinon.stub(Cita, &#x27;delete&#x27;).rejects(new Error(&#x27;Error al eliminar&#x27;));\nawait CitaController.deleteCita(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Error al eliminar&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78d609af-51be-4e9f-9116-b272692eabc6&quot;,&quot;parentUUID&quot;:&quot;0462e086-2302-48c7-aa64-3c59350fed47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c861e610-d4f5-4ed6-a2be-5bdb4ab11fa8&quot;,&quot;3ccc7d23-3cf3-4362-8331-246fd6240339&quot;,&quot;78d609af-51be-4e9f-9116-b272692eabc6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c7278c29-b36c-43b1-a774-b1e5de1a90b5&quot;,&quot;title&quot;:&quot;Cita Model&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Cita Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Cita Model \&quot;after each\&quot; hook in \&quot;Cita Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore(); // Restaura los stubs después de cada prueba&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a317c54f-ec9d-4bac-a9e9-068ed9a60a87&quot;,&quot;parentUUID&quot;:&quot;c7278c29-b36c-43b1-a774-b1e5de1a90b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;793ed894-2c25-4464-b16a-d9f34abd237a&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver todas las citas&quot;,&quot;fullTitle&quot;:&quot;Cita Model findAll debería devolver todas las citas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockRows = [{ idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, idclientes: 1 }];\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: mockRows });\nconst result = await Cita.findAll();\nexpect(result).to.deep.equal(mockRows);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61d886ff-ecb3-4cd6-ae7c-628de5e33118&quot;,&quot;parentUUID&quot;:&quot;793ed894-2c25-4464-b16a-d9f34abd237a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un array vacío si no hay citas&quot;,&quot;fullTitle&quot;:&quot;Cita Model findAll debería devolver un array vacío si no hay citas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [] });\nconst result = await Cita.findAll();\nexpect(result).to.deep.equal([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4174ca48-93c5-4ce7-9633-99a06f6edffe&quot;,&quot;parentUUID&quot;:&quot;793ed894-2c25-4464-b16a-d9f34abd237a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61d886ff-ecb3-4cd6-ae7c-628de5e33118&quot;,&quot;4174ca48-93c5-4ce7-9633-99a06f6edffe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79621a8e-d55f-4eb7-acec-c0466346ddb1&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería crear una nueva cita y devolverla&quot;,&quot;fullTitle&quot;:&quot;Cita Model create debería crear una nueva cita y devolverla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, idclientes: 1 };\nconst mockResult = { idcitas: 2, ...data };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockResult] });\nconst result = await Cita.create(data);\nexpect(result).to.deep.equal(mockResult);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aee33777-ac45-4603-98e8-1472c7921137&quot;,&quot;parentUUID&quot;:&quot;79621a8e-d55f-4eb7-acec-c0466346ddb1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería fallar al crear una cita si faltan datos&quot;,&quot;fullTitle&quot;:&quot;Cita Model create debería fallar al crear una cita si faltan datos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { ubicacion: &#x27;Oficina&#x27;, idclientes: 1 }; // Falta &#x27;fechacita&#x27;\nsinon.stub(pool, &#x27;query&#x27;).rejects(new Error(&#x27;Missing data&#x27;));\ntry {\n    await Cita.create(data);\n} catch (error) {\n    expect(error.message).to.equal(&#x27;Missing data&#x27;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c1cb1ac-3d2c-4d17-85d7-fd6533993ded&quot;,&quot;parentUUID&quot;:&quot;79621a8e-d55f-4eb7-acec-c0466346ddb1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aee33777-ac45-4603-98e8-1472c7921137&quot;,&quot;8c1cb1ac-3d2c-4d17-85d7-fd6533993ded&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8ac5fea-42ba-4835-b4e4-eb59be54cada&quot;,&quot;title&quot;:&quot;findById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería encontrar una cita por su ID&quot;,&quot;fullTitle&quot;:&quot;Cita Model findById debería encontrar una cita por su ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockRow = { idcitas: 1, fechacita: &#x27;2024-11-12&#x27;, ubicacion: &#x27;Oficina&#x27;, idclientes: 1 };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockRow] });\nconst result = await Cita.findById(1);\nexpect(result).to.deep.equal(mockRow);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3a50d84-c526-41f4-9c2e-0b7ba94dd578&quot;,&quot;parentUUID&quot;:&quot;d8ac5fea-42ba-4835-b4e4-eb59be54cada&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3a50d84-c526-41f4-9c2e-0b7ba94dd578&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8de9643a-8785-4b08-8fea-acc5a5288167&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería actualizar una cita y devolverla&quot;,&quot;fullTitle&quot;:&quot;Cita Model update debería actualizar una cita y devolverla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { fechacita: &#x27;2024-12-01&#x27;, ubicacion: &#x27;Casa&#x27;, idclientes: 1 };\nconst mockResult = { idcitas: 1, ...data };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockResult] });\nconst result = await Cita.update(1, data);\nexpect(result).to.deep.equal(mockResult);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cc92244-8455-4a89-80af-0ca297ad249a&quot;,&quot;parentUUID&quot;:&quot;8de9643a-8785-4b08-8fea-acc5a5288167&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6cc92244-8455-4a89-80af-0ca297ad249a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37a9bbaa-e8f5-47a7-a42a-14deda166b58&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\CitaModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\CitaModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería marcar una cita como eliminada y devolverla&quot;,&quot;fullTitle&quot;:&quot;Cita Model delete debería marcar una cita como eliminada y devolverla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockRow = {\n    idcitas: 1,\n    fechacita: &#x27;2024-11-12&#x27;,\n    ubicacion: &#x27;Oficina&#x27;,\n    idclientes: 1,\n    delete_at: new Date(),\n};\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockRow] });\nconst result = await Cita.delete(1);\nexpect(result).to.deep.equal(mockRow);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9f727c6-141d-4000-bc57-6c84752aed44&quot;,&quot;parentUUID&quot;:&quot;37a9bbaa-e8f5-47a7-a42a-14deda166b58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9f727c6-141d-4000-bc57-6c84752aed44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a4a1683-5868-4394-b042-fa847f966309&quot;,&quot;title&quot;:&quot;ClienteController&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;ClienteController\&quot;&quot;,&quot;fullTitle&quot;:&quot;ClienteController \&quot;before each\&quot; hook in \&quot;ClienteController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { params: {}, body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8dbe1d4-e8a7-4d07-9773-cc5b79e4f137&quot;,&quot;parentUUID&quot;:&quot;0a4a1683-5868-4394-b042-fa847f966309&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;ClienteController\&quot;&quot;,&quot;fullTitle&quot;:&quot;ClienteController \&quot;after each\&quot; hook in \&quot;ClienteController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4e41353-92dc-41f9-9cf8-9f3d345a8fcc&quot;,&quot;parentUUID&quot;:&quot;0a4a1683-5868-4394-b042-fa847f966309&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8c225161-6e66-46cb-bc37-35d15752f34c&quot;,&quot;title&quot;:&quot;getAllClientes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver todos los clientes con un mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;ClienteController getAllClientes debería devolver todos los clientes con un mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockClientes = [{ id: 1, nombre: &#x27;Juan Pérez&#x27;, email: &#x27;juan@example.com&#x27; }];\nstub = sinon.stub(Cliente, &#x27;findAll&#x27;).resolves(mockClientes);\nawait ClienteController.getAllClientes(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Lista de todos los Clientes\&quot;,\n    clientes: mockClientes\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82715edf-0d6e-43d4-ae13-f478648f5d66&quot;,&quot;parentUUID&quot;:&quot;8c225161-6e66-46cb-bc37-35d15752f34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si ocurre un problema al obtener los clientes&quot;,&quot;fullTitle&quot;:&quot;ClienteController getAllClientes debería devolver un error si ocurre un problema al obtener los clientes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cliente, &#x27;findAll&#x27;).rejects(new Error(&#x27;Database error&#x27;));\nawait ClienteController.getAllClientes(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b84f77d3-d1a3-438d-b1bb-23380a6364ac&quot;,&quot;parentUUID&quot;:&quot;8c225161-6e66-46cb-bc37-35d15752f34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82715edf-0d6e-43d4-ae13-f478648f5d66&quot;,&quot;b84f77d3-d1a3-438d-b1bb-23380a6364ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae0b6518-d3cb-4872-ab74-5694262216f3&quot;,&quot;title&quot;:&quot;createCliente&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería crear un cliente y devolver un mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;ClienteController createCliente debería crear un cliente y devolver un mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newCliente = { nombre: &#x27;Maria Lopez&#x27;, email: &#x27;maria@example.com&#x27; };\nconst createdCliente = { id: 2, ...newCliente };\nstub = sinon.stub(Cliente, &#x27;create&#x27;).resolves(createdCliente);\nreq.body = newCliente;\nawait ClienteController.createCliente(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n    message: \&quot;Creado exitosamente el cliente\&quot;,\n    cliente: createdCliente\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9abf4a01-abe1-4dea-b7f3-7a13c5705a54&quot;,&quot;parentUUID&quot;:&quot;ae0b6518-d3cb-4872-ab74-5694262216f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si no se puede crear el cliente&quot;,&quot;fullTitle&quot;:&quot;ClienteController createCliente debería devolver un error si no se puede crear el cliente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cliente, &#x27;create&#x27;).rejects(new Error(&#x27;Error de creación&#x27;));\nawait ClienteController.createCliente(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Error de creación&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a386371-a31e-4682-aa44-aa7e3c1f37a0&quot;,&quot;parentUUID&quot;:&quot;ae0b6518-d3cb-4872-ab74-5694262216f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9abf4a01-abe1-4dea-b7f3-7a13c5705a54&quot;,&quot;2a386371-a31e-4682-aa44-aa7e3c1f37a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f49d2ee4-5a66-41eb-b5d6-569682103b80&quot;,&quot;title&quot;:&quot;getClienteById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver un cliente si se encuentra el ID&quot;,&quot;fullTitle&quot;:&quot;ClienteController getClienteById debería devolver un cliente si se encuentra el ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCliente = { id: 1, nombre: &#x27;Juan Pérez&#x27;, email: &#x27;juan@example.com&#x27; };\nstub = sinon.stub(Cliente, &#x27;findById&#x27;).resolves(mockCliente);\nreq.params.id = 1;\nawait ClienteController.getClienteById(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cliente encontrado\&quot;,\n    cliente: mockCliente\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95ae6182-8601-4f45-8171-9269e38a8c91&quot;,&quot;parentUUID&quot;:&quot;f49d2ee4-5a66-41eb-b5d6-569682103b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si el cliente no existe&quot;,&quot;fullTitle&quot;:&quot;ClienteController getClienteById debería devolver un 404 si el cliente no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cliente, &#x27;findById&#x27;).resolves(null);\nreq.params.id = 999;\nawait ClienteController.getClienteById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cliente no encontrado\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7915103c-87f0-483b-b133-d40b50b27762&quot;,&quot;parentUUID&quot;:&quot;f49d2ee4-5a66-41eb-b5d6-569682103b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95ae6182-8601-4f45-8171-9269e38a8c91&quot;,&quot;7915103c-87f0-483b-b133-d40b50b27762&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7f59594-8042-4141-be58-1d839764a0b0&quot;,&quot;title&quot;:&quot;updateCliente&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería actualizar un cliente y devolver un mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;ClienteController updateCliente debería actualizar un cliente y devolver un mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedCliente = { id: 1, nombre: &#x27;Juan Pérez&#x27;, email: &#x27;juan_perez@example.com&#x27; };\nstub = sinon.stub(Cliente, &#x27;update&#x27;).resolves(updatedCliente);\nreq.params.id = 1;\nreq.body = updatedCliente;\nawait ClienteController.updateCliente(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cliente actualizado\&quot;,\n    cliente: updatedCliente\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19c2b6ef-45c3-4aec-8ec2-baa6bde3f2a4&quot;,&quot;parentUUID&quot;:&quot;f7f59594-8042-4141-be58-1d839764a0b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si el cliente a actualizar no existe&quot;,&quot;fullTitle&quot;:&quot;ClienteController updateCliente debería devolver un 404 si el cliente a actualizar no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub = sinon.stub(Cliente, &#x27;update&#x27;).resolves(null);\nreq.params.id = 999;\nawait ClienteController.updateCliente(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cliente no encontrado\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb5b9963-dc51-4bdd-b8f7-2d84bbe6689d&quot;,&quot;parentUUID&quot;:&quot;f7f59594-8042-4141-be58-1d839764a0b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19c2b6ef-45c3-4aec-8ec2-baa6bde3f2a4&quot;,&quot;cb5b9963-dc51-4bdd-b8f7-2d84bbe6689d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;65b2f431-49af-46b3-b260-f01588a62749&quot;,&quot;title&quot;:&quot;deleteCliente&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteController.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un cliente y devolver un mensaje de éxito&quot;,&quot;fullTitle&quot;:&quot;ClienteController deleteCliente debería eliminar un cliente y devolver un mensaje de éxito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCliente = { id: 1, nombre: &#x27;Juan Pérez&#x27;, email: &#x27;juan@example.com&#x27; };\nsinon.stub(Cliente, &#x27;findById&#x27;).resolves(mockCliente);\nsinon.stub(Cliente, &#x27;delete&#x27;).resolves(mockCliente);\nreq.params.id = 1;\nawait ClienteController.deleteCliente(req, res);\nexpect(res.json.calledWith({\n    message: \&quot;Cliente eliminado\&quot;,\n    cliente: mockCliente\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa73f736-e2c4-4373-8cb6-4464c9a97047&quot;,&quot;parentUUID&quot;:&quot;65b2f431-49af-46b3-b260-f01588a62749&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un 404 si el cliente a eliminar no existe&quot;,&quot;fullTitle&quot;:&quot;ClienteController deleteCliente debería devolver un 404 si el cliente a eliminar no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(Cliente, &#x27;findById&#x27;).resolves(null);\nreq.params.id = 999;\nawait ClienteController.deleteCliente(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Cliente no encontrado\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fb8eca5-698e-4d63-8800-8e9280c0273f&quot;,&quot;parentUUID&quot;:&quot;65b2f431-49af-46b3-b260-f01588a62749&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería devolver un error si ocurre un problema al eliminar&quot;,&quot;fullTitle&quot;:&quot;ClienteController deleteCliente debería devolver un error si ocurre un problema al eliminar&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCliente = { id: 1, nombre: &#x27;Juan Pérez&#x27;, email: &#x27;juan@example.com&#x27; };\nsinon.stub(Cliente, &#x27;findById&#x27;).resolves(mockCliente);\nsinon.stub(Cliente, &#x27;delete&#x27;).rejects(new Error(&#x27;Error al eliminar&#x27;));\nawait ClienteController.deleteCliente(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: &#x27;Error al eliminar&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;775405e8-31b5-4a45-a1f3-0b27e20926fb&quot;,&quot;parentUUID&quot;:&quot;65b2f431-49af-46b3-b260-f01588a62749&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa73f736-e2c4-4373-8cb6-4464c9a97047&quot;,&quot;4fb8eca5-698e-4d63-8800-8e9280c0273f&quot;,&quot;775405e8-31b5-4a45-a1f3-0b27e20926fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4be5742e-6a75-48de-b3db-c2003ee0a943&quot;,&quot;title&quot;:&quot;Cliente Model&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Cliente Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Cliente Model \&quot;after each\&quot; hook in \&quot;Cliente Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore(); // Restaurar los stubs y mocks después de cada prueba&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0883e94e-b501-41ef-8269-8de70f1075f7&quot;,&quot;parentUUID&quot;:&quot;4be5742e-6a75-48de-b3db-c2003ee0a943&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb86f982-6ecd-43e4-bef3-3f606ac46cf5&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver todos los clientes&quot;,&quot;fullTitle&quot;:&quot;Cliente Model findAll debería devolver todos los clientes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockClientes = [{ id: 1, nombre: &#x27;Juan&#x27;, apellidos: &#x27;Pérez&#x27; }];\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: mockClientes });\nconst result = await Cliente.findAll();\nexpect(result).to.deep.equal(mockClientes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee5ba123-7734-4c98-9775-f0e996ee8bae&quot;,&quot;parentUUID&quot;:&quot;fb86f982-6ecd-43e4-bef3-3f606ac46cf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee5ba123-7734-4c98-9775-f0e996ee8bae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;00957a1c-b994-473a-83a5-3ab2b258a20e&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería crear un cliente y devolver el cliente creado&quot;,&quot;fullTitle&quot;:&quot;Cliente Model create debería crear un cliente y devolver el cliente creado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newCliente = { nombre: &#x27;Maria&#x27;, apellidos: &#x27;Lopez&#x27;, direccion: &#x27;Calle 123&#x27;, telefono: &#x27;1234567890&#x27;, email: &#x27;maria@example.com&#x27; };\nconst mockClienteCreated = { id: 2, ...newCliente };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockClienteCreated] });\nconst result = await Cliente.create(newCliente);\nexpect(result).to.deep.equal(mockClienteCreated);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a3a0692-e1e9-4ec2-acf5-8f7aadbb9f1c&quot;,&quot;parentUUID&quot;:&quot;00957a1c-b994-473a-83a5-3ab2b258a20e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a3a0692-e1e9-4ec2-acf5-8f7aadbb9f1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc0f655d-f97e-494c-a9d9-307c63b38409&quot;,&quot;title&quot;:&quot;findById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver un cliente si se encuentra el ID&quot;,&quot;fullTitle&quot;:&quot;Cliente Model findById debería devolver un cliente si se encuentra el ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockCliente = { id: 1, nombre: &#x27;Juan&#x27;, apellidos: &#x27;Pérez&#x27; };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockCliente] });\nconst result = await Cliente.findById(1);\nexpect(result).to.deep.equal(mockCliente);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c0b4352-81a5-4671-b6a2-1604f213be99&quot;,&quot;parentUUID&quot;:&quot;cc0f655d-f97e-494c-a9d9-307c63b38409&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c0b4352-81a5-4671-b6a2-1604f213be99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c70212f1-59c0-4d22-95f5-2c5caeeba99b&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería actualizar un cliente y devolver el cliente actualizado&quot;,&quot;fullTitle&quot;:&quot;Cliente Model update debería actualizar un cliente y devolver el cliente actualizado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedCliente = { nombre: &#x27;Juan&#x27;, apellidos: &#x27;Pérez&#x27;, direccion: &#x27;Nueva Calle&#x27;, telefono: &#x27;9876543210&#x27;, email: &#x27;juan_nuevo@example.com&#x27; };\nconst mockClienteUpdated = { id: 1, ...updatedCliente };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockClienteUpdated] });\nconst result = await Cliente.update(1, updatedCliente);\nexpect(result).to.deep.equal(mockClienteUpdated);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d03f664a-6f13-49d5-86a2-010100301f9b&quot;,&quot;parentUUID&quot;:&quot;c70212f1-59c0-4d22-95f5-2c5caeeba99b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d03f664a-6f13-49d5-86a2-010100301f9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8cba2208-e894-4b00-9103-5ee9df7a589f&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ClienteModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ClienteModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un cliente y devolver el cliente eliminado&quot;,&quot;fullTitle&quot;:&quot;Cliente Model delete debería eliminar un cliente y devolver el cliente eliminado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockClienteDeleted = { id: 1, nombre: &#x27;Juan&#x27;, apellidos: &#x27;Pérez&#x27;, delete_at: new Date() };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockClienteDeleted] });\nconst result = await Cliente.delete(1);\nexpect(result).to.deep.equal(mockClienteDeleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc63fe0e-84a2-4b0f-ad17-8f9e8d972bf5&quot;,&quot;parentUUID&quot;:&quot;8cba2208-e894-4b00-9103-5ee9df7a589f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc63fe0e-84a2-4b0f-ad17-8f9e8d972bf5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;title&quot;:&quot;EmpleadoController&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\EmpleadoController.test.js&quot;,&quot;file&quot;:&quot;\\test\\EmpleadoController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;EmpleadoController\&quot;&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController \&quot;before each\&quot; hook in \&quot;EmpleadoController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Stubs para los métodos del modelo\ncreateStub = sinon.stub(Empleado, &#x27;create&#x27;);\nfindAllStub = sinon.stub(Empleado, &#x27;findAll&#x27;);\nfindByIdStub = sinon.stub(Empleado, &#x27;findById&#x27;);\nupdateStub = sinon.stub(Empleado, &#x27;update&#x27;);\ndeleteStub = sinon.stub(Empleado, &#x27;delete&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;032346d2-ef93-4600-91c7-8ec577cb04d4&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;EmpleadoController\&quot;&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController \&quot;after each\&quot; hook in \&quot;EmpleadoController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Restaurar los métodos originales\nsinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e976a40-052b-4208-838c-7a9b329e4427&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Debería obtener todos los empleados&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería obtener todos los empleados&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockEmpleados = [{ id: 1, nombre: &#x27;Empleado 1&#x27; }, { id: 2, nombre: &#x27;Empleado 2&#x27; }];\nfindAllStub.resolves(mockEmpleados);\nconst req = {};\nconst res = {\n    json: sinon.spy(),\n};\nawait EmpleadoController.getAllEmpleados(req, res);\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].empleados).to.deep.equal(mockEmpleados);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a88cdc6-d91f-4567-b712-77fbde08598e&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería manejar el error si getAllEmpleados falla&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería manejar el error si getAllEmpleados falla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;findAllStub.rejects(new Error(&#x27;Database error&#x27;));\nconst req = {};\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.getAllEmpleados(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].error).to.equal(&#x27;Database error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d9f2976-6b90-49e0-8096-3a96a027ac82&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería crear un nuevo empleado&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería crear un nuevo empleado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newEmpleado = { nombre: &#x27;Empleado 1&#x27;, RFC: &#x27;ABC123&#x27;, telefono: &#x27;1234567890&#x27;, apellidos: &#x27;Apellido&#x27; };\ncreateStub.resolves(newEmpleado);\nconst req = { body: newEmpleado };\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.createEmpleado(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].empleado).to.deep.equal(newEmpleado);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79212e78-7330-4cd0-90d7-e96d88e13216&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería manejar el error si createEmpleado falla&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería manejar el error si createEmpleado falla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createStub.rejects(new Error(&#x27;Error al crear empleado&#x27;));\nconst req = { body: {} };\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.createEmpleado(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].error).to.equal(&#x27;Error al crear empleado&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;462fcb9b-b012-45d5-9f0b-b53388be19d3&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería obtener un empleado por ID&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería obtener un empleado por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockEmpleado = { id: 1, nombre: &#x27;Empleado 1&#x27; };\nfindByIdStub.resolves(mockEmpleado);\nconst req = { params: { id: 1 } };\nconst res = {\n    json: sinon.spy(),\n};\nawait EmpleadoController.getEmpleadoById(req, res);\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].empleado).to.deep.equal(mockEmpleado);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7bdf988-2816-4acb-b648-d003cf10207b&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería manejar el error si getEmpleadoById falla&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería manejar el error si getEmpleadoById falla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;findByIdStub.rejects(new Error(&#x27;Database error&#x27;));\nconst req = { params: { id: 1 } };\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.getEmpleadoById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].error).to.equal(&#x27;Database error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7a48212-8ea4-42d6-87ab-77706648af48&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería actualizar un empleado&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería actualizar un empleado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedEmpleado = { id: 1, nombre: &#x27;Empleado actualizado&#x27; };\nupdateStub.resolves(updatedEmpleado);\nconst req = { params: { id: 1 }, body: { nombre: &#x27;Empleado actualizado&#x27; } };\nconst res = {\n    json: sinon.spy(),\n};\nawait EmpleadoController.updateEmpleado(req, res);\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].empleado).to.deep.equal(updatedEmpleado);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d35b662-72f7-4936-b7e3-cf014c4776a2&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería manejar el error si updateEmpleado falla&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería manejar el error si updateEmpleado falla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;updateStub.rejects(new Error(&#x27;Database error&#x27;));\nconst req = { params: { id: 1 }, body: { nombre: &#x27;Empleado actualizado&#x27; } };\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.updateEmpleado(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].error).to.equal(&#x27;Database error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce8904ed-49ae-4e11-9a7a-e22926b38d0e&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Debería manejar el error si deleteEmpleado falla&quot;,&quot;fullTitle&quot;:&quot;EmpleadoController Debería manejar el error si deleteEmpleado falla&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;deleteStub.rejects(new Error(&#x27;Database error&#x27;));\nconst req = { params: { id: 1 } };\nconst res = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy(),\n};\nawait EmpleadoController.deleteEmpleado(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nexpect(res.json.args[0][0].error).to.equal(&#x27;Database error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e8c68d0-be01-4e72-bdec-bc080eaedb64&quot;,&quot;parentUUID&quot;:&quot;37fea443-c5e1-4a5c-959e-a69a0e2f7dfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a88cdc6-d91f-4567-b712-77fbde08598e&quot;,&quot;1d9f2976-6b90-49e0-8096-3a96a027ac82&quot;,&quot;79212e78-7330-4cd0-90d7-e96d88e13216&quot;,&quot;462fcb9b-b012-45d5-9f0b-b53388be19d3&quot;,&quot;b7bdf988-2816-4acb-b648-d003cf10207b&quot;,&quot;c7a48212-8ea4-42d6-87ab-77706648af48&quot;,&quot;2d35b662-72f7-4936-b7e3-cf014c4776a2&quot;,&quot;ce8904ed-49ae-4e11-9a7a-e22926b38d0e&quot;,&quot;7e8c68d0-be01-4e72-bdec-bc080eaedb64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;title&quot;:&quot;Servicio Model&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\ServiciosModel.test.js&quot;,&quot;file&quot;:&quot;\\test\\ServiciosModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Servicio Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Servicio Model \&quot;after each\&quot; hook in \&quot;Servicio Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore(); // Restauramos todos los mocks, stubs, etc.&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a646cca0-5a19-43d4-a87c-e6d3f96e4a95&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;findAll debería devolver todos los servicios&quot;,&quot;fullTitle&quot;:&quot;Servicio Model findAll debería devolver todos los servicios&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockServicios = [\n    { id: 1, ubicacion: &#x27;Ubicación A&#x27;, precio: 100, idservicio: 1 },\n    { id: 2, ubicacion: &#x27;Ubicación B&#x27;, precio: 200, idservicio: 2 }\n];\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: mockServicios });\nconst servicios = await Servicio.findAll();\nexpect(servicios).to.deep.equal(mockServicios);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;970a4474-b1a6-42fb-bab7-90219e9f8001&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;create debería crear un nuevo servicio&quot;,&quot;fullTitle&quot;:&quot;Servicio Model create debería crear un nuevo servicio&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const servicioData = { ubicacion: &#x27;Ubicación A&#x27;, precio: 100, idservicio: 1 };\nconst mockServicio = { id: 1, ...servicioData };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockServicio] });\nconst servicio = await Servicio.create(servicioData);\nexpect(servicio).to.deep.equal(mockServicio);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad5ab227-b732-44f4-808d-29c0521ab642&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;findById debería devolver un servicio por su ID&quot;,&quot;fullTitle&quot;:&quot;Servicio Model findById debería devolver un servicio por su ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockServicio = { id: 1, ubicacion: &#x27;Ubicación A&#x27;, precio: 100, idservicio: 1 };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockServicio] });\nconst servicio = await Servicio.findById(1);\nexpect(servicio).to.deep.equal(mockServicio);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b9dbb1a-2c4b-4e79-989f-74ac6cd9b29f&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;update debería actualizar un servicio correctamente&quot;,&quot;fullTitle&quot;:&quot;Servicio Model update debería actualizar un servicio correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedData = { ubicacion: &#x27;Ubicación A actualizada&#x27;, precio: 150, idservicio: 1 };\nconst mockServicioActualizado = { id: 1, ...updatedData };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockServicioActualizado] });\nconst servicio = await Servicio.update(1, updatedData);\nexpect(servicio).to.deep.equal(mockServicioActualizado);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9e31154-da5e-4ff0-bc31-78e482ec6640&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete debería marcar un servicio como eliminado&quot;,&quot;fullTitle&quot;:&quot;Servicio Model delete debería marcar un servicio como eliminado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockServicio = { id: 1, ubicacion: &#x27;Ubicación A&#x27;, precio: 100, idservicio: 1 };\nsinon.stub(pool, &#x27;query&#x27;).resolves({ rows: [mockServicio] });\nconst result = await Servicio.delete(1);\nexpect(result.message).to.equal(&#x27;Servicio eliminado correctamente&#x27;);\nexpect(result.servicio).to.deep.equal(mockServicio);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0191d386-36c5-4362-a8ec-daf1b434a72f&quot;,&quot;parentUUID&quot;:&quot;aaa055f7-9aea-481b-a452-f3b828350d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;970a4474-b1a6-42fb-bab7-90219e9f8001&quot;,&quot;ad5ab227-b732-44f4-808d-29c0521ab642&quot;,&quot;3b9dbb1a-2c4b-4e79-989f-74ac6cd9b29f&quot;,&quot;b9e31154-da5e-4ff0-bc31-78e482ec6640&quot;,&quot;0191d386-36c5-4362-a8ec-daf1b434a72f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a172b974-829f-416a-bd95-f79ea42b885a&quot;,&quot;title&quot;:&quot;Usuario Model&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Usuario Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Usuario Model \&quot;before all\&quot; hook in \&quot;Usuario Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1033,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpiar primero la tabla de EMPLEADOS y luego la de USUARIOS para evitar conflictos de claves foráneas\nawait pool.query(&#x27;DELETE FROM EMPLEADOS&#x27;);\nawait pool.query(&#x27;DELETE FROM USUARIOS&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: getaddrinfo ENOTFOUND proyectointegrador_db_1&quot;,&quot;estack&quot;:&quot;Error: getaddrinfo ENOTFOUND proyectointegrador_db_1\n    at C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Context.&lt;anonymous&gt; (file:///C:/Users/ferle/Pictures/ProyectoIntegrador/test/UserModels.test.js:9:5)&quot;},&quot;uuid&quot;:&quot;e56d669e-559c-4d62-a5af-f3fe5bfa42a3&quot;,&quot;parentUUID&quot;:&quot;a172b974-829f-416a-bd95-f79ea42b885a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Usuario Model\&quot;&quot;,&quot;fullTitle&quot;:&quot;Usuario Model \&quot;after all\&quot; hook in \&quot;Usuario Model\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1027,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpiar las tablas nuevamente después de las pruebas\nawait pool.query(&#x27;DELETE FROM EMPLEADOS&#x27;);\nawait pool.query(&#x27;DELETE FROM USUARIOS&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: getaddrinfo ENOTFOUND proyectointegrador_db_1&quot;,&quot;estack&quot;:&quot;Error: getaddrinfo ENOTFOUND proyectointegrador_db_1\n    at C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Context.&lt;anonymous&gt; (file:///C:/Users/ferle/Pictures/ProyectoIntegrador/test/UserModels.test.js:15:5)&quot;},&quot;uuid&quot;:&quot;0c0e4159-d507-47b5-abb2-f3dd297f1d51&quot;,&quot;parentUUID&quot;:&quot;a172b974-829f-416a-bd95-f79ea42b885a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;afafc9f9-2e75-4d0f-8192-4a0af78c862c&quot;,&quot;title&quot;:&quot;findAll&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver una lista vacía si no hay usuarios&quot;,&quot;fullTitle&quot;:&quot;Usuario Model findAll debería devolver una lista vacía si no hay usuarios&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuarios = await Usuario.findAll();\nexpect(usuarios).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81e3d034-70a9-4377-a3f3-161899c3477d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;81e3d034-70a9-4377-a3f3-161899c3477d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d1a271b-d4e2-400b-a829-0c94de8a2d14&quot;,&quot;title&quot;:&quot;create&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería crear un usuario correctamente&quot;,&quot;fullTitle&quot;:&quot;Usuario Model create debería crear un usuario correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuario = await Usuario.create({\n  nombre: &#x27;Juan&#x27;,\n  correo: &#x27;juan@example.com&#x27;,\n  contraseña: &#x27;password123&#x27;,\n  idrol: 1\n});\nexpect(usuario).to.include({ nombre: &#x27;Juan&#x27;, correo: &#x27;juan@example.com&#x27;, idrol: 1 });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bac27bd-914c-46f5-8ee1-6eeeb2989a74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;0bac27bd-914c-46f5-8ee1-6eeeb2989a74&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee988828-d94a-4267-8d18-b4815b099841&quot;,&quot;title&quot;:&quot;findById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver un usuario existente por su ID&quot;,&quot;fullTitle&quot;:&quot;Usuario Model findById debería devolver un usuario existente por su ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuarioCreado = await Usuario.create({\n  nombre: &#x27;Carlos&#x27;,\n  correo: &#x27;carlos@example.com&#x27;,\n  contraseña: &#x27;password456&#x27;,\n  idrol: 2\n});\nconst usuario = await Usuario.findById(usuarioCreado.idUsuarios);\nexpect(usuario).to.not.be.null;\nexpect(usuario).to.include({ nombre: &#x27;Carlos&#x27;, correo: &#x27;carlos@example.com&#x27;, idrol: 2 });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4bcdbd5-0547-4933-a1db-cb8710d0895f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;debería devolver null si el usuario no existe&quot;,&quot;fullTitle&quot;:&quot;Usuario Model findById debería devolver null si el usuario no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuario = await Usuario.findById(9999); // ID que no existe\nexpect(usuario).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5fd10ff-e010-4e99-a452-24050a36fd31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;a4bcdbd5-0547-4933-a1db-cb8710d0895f&quot;,&quot;c5fd10ff-e010-4e99-a452-24050a36fd31&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;abb82f71-e083-4363-b59c-ca59e8973d27&quot;,&quot;title&quot;:&quot;update&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería actualizar un usuario existente correctamente&quot;,&quot;fullTitle&quot;:&quot;Usuario Model update debería actualizar un usuario existente correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuario = await Usuario.create({\n  nombre: &#x27;Ana&#x27;,\n  correo: &#x27;ana@example.com&#x27;,\n  contraseña: &#x27;password789&#x27;,\n  idrol: 3\n});\nconst usuarioActualizado = await Usuario.update(usuario.idUsuarios, {\n  nombre: &#x27;Ana Actualizada&#x27;,\n  correo: &#x27;ana.actualizada@example.com&#x27;,\n  contraseña: &#x27;newpassword&#x27;,\n  idrol: 3\n});\nexpect(usuarioActualizado).to.include({\n  nombre: &#x27;Ana Actualizada&#x27;,\n  correo: &#x27;ana.actualizada@example.com&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bce81482-b4db-43fe-8bba-3d6adcef7d3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;debería devolver null si el usuario a actualizar no existe&quot;,&quot;fullTitle&quot;:&quot;Usuario Model update debería devolver null si el usuario a actualizar no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuarioActualizado = await Usuario.update(9999, {\n  nombre: &#x27;Nombre Inexistente&#x27;,\n  correo: &#x27;correo@inexistente.com&#x27;,\n  contraseña: &#x27;contraseña&#x27;,\n  idrol: 4\n});\nexpect(usuarioActualizado).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4fefff4-0a09-4b60-b638-e82f85eacb77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;bce81482-b4db-43fe-8bba-3d6adcef7d3a&quot;,&quot;c4fefff4-0a09-4b60-b638-e82f85eacb77&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;83579e10-3ddf-494f-ae90-8816a8f62ab8&quot;,&quot;title&quot;:&quot;delete&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería marcar un usuario como eliminado&quot;,&quot;fullTitle&quot;:&quot;Usuario Model delete debería marcar un usuario como eliminado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuario = await Usuario.create({\n  nombre: &#x27;Eliminar&#x27;,\n  correo: &#x27;eliminar@example.com&#x27;,\n  contraseña: &#x27;contraseñaborrar&#x27;,\n  idrol: 1\n});\nconst usuarioEliminado = await Usuario.delete(usuario.idUsuarios);\nexpect(usuarioEliminado).to.include({ nombre: &#x27;Eliminar&#x27;, correo: &#x27;eliminar@example.com&#x27; });\nexpect(usuarioEliminado.delete_at).to.not.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cf9cd5b-a222-46a6-80f4-b97185df21c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;debería devolver null si el usuario ya fue eliminado o no existe&quot;,&quot;fullTitle&quot;:&quot;Usuario Model delete debería devolver null si el usuario ya fue eliminado o no existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const usuarioEliminado = await Usuario.delete(9999); // ID inexistente o eliminado\nexpect(usuarioEliminado).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe52cb3a-f83e-4def-ab75-ccde2d1e9b8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2cf9cd5b-a222-46a6-80f4-b97185df21c4&quot;,&quot;fe52cb3a-f83e-4def-ab75-ccde2d1e9b8e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;743ec034-ac40-488d-8212-7ee50d0d28cb&quot;,&quot;title&quot;:&quot;Pruebas adicionales&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\test\\UserModels.test.js&quot;,&quot;file&quot;:&quot;\\test\\UserModels.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería devolver una lista con usuarios después de creación&quot;,&quot;fullTitle&quot;:&quot;Usuario Model Pruebas adicionales debería devolver una lista con usuarios después de creación&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Usuario.create({ nombre: &#x27;Lista&#x27;, correo: &#x27;lista@example.com&#x27;, contraseña: &#x27;contraseña&#x27;, idrol: 2 });\nconst usuarios = await Usuario.findAll();\nexpect(usuarios).to.be.an(&#x27;array&#x27;).that.is.not.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e42f83e2-c64f-483f-a06c-324e49c1dd94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;debería no duplicar usuarios con el mismo correo&quot;,&quot;fullTitle&quot;:&quot;Usuario Model Pruebas adicionales debería no duplicar usuarios con el mismo correo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  await Usuario.create({ nombre: &#x27;Duplicado&#x27;, correo: &#x27;duplicado@example.com&#x27;, contraseña: &#x27;contraseña&#x27;, idrol: 1 });\n  await Usuario.create({ nombre: &#x27;Duplicado&#x27;, correo: &#x27;duplicado@example.com&#x27;, contraseña: &#x27;contraseña&#x27;, idrol: 1 });\n} catch (error) {\n  expect(error).to.exist;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;902283a5-4817-4478-8f19-74b9695939a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e42f83e2-c64f-483f-a06c-324e49c1dd94&quot;,&quot;902283a5-4817-4478-8f19-74b9695939a9&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;ProyectoIntegrador&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\ferle\\Pictures\\ProyectoIntegrador\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>